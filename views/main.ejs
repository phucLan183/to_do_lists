<!DOCTYPE html>
<html>

<head>
  <%- include('layouts/head.ejs') -%>
</head>

<body>
  <main class="app-main">
    <a href="/addtask" class="app-add-new"><img src="/icons/icon-plus.svg" alt=""></a>
    <div class="app-header flex flex-col justify-between">
      <div class="header-user"><img src="/icons/icon-user.svg" alt=""></div>
      <div class="header-title">Your <br> Things</div>
      <div class="header-date">
        <%= dateNow%>
      </div>
      <div class="header-overlay flex flex-col justify-between">
        <form class="header-filter app-form" action="/" method="GET">
          <div class="form-group">
            <div class="form-item flex justify-end">
              <select name="category">
                <option value="*" selected>All</option>
                <%for (let rows of categoryRows) { %>
                <option value="<%= rows.id %>">
                  <%= rows.name%>
                </option>
                <%}%>
              </select>
            </div>
          </div>
        </form>
        <div class="header-overview">
          <div class="header-tasks-group flex justify-end">
            <div class="header-tasks">
              <div class="task-value"><%= rows_total[0].total%></div>
            <div class="task-label">To do</div>
          </div>
          <div class="header-tasks">
            <div class="task-value"><%= rows_total[0].completed%></div>
            <div class="task-label">Completed</div>
          </div>
      </div>
      <div class="header-progress flex items-center justify-end">
        <div class="progress-circle">
          <div class="circle-bar"></div>
        </div>
        <div class="progress-label">
          <%= percent %>% Done
        </div>
      </div>
    </div>
    </div>
    </div>
    <div class="app-main-wrapper">
      <div class="main-title flex items-center">
        <div class="title">Tasks </div>
        <div class="total"><%= rows_total[0].unfinish %></div>
      </div>
      <div class="main-lists tasks">
        <% for(let task of taskRows){%>
        <% if(task.completed == false){%>
        <div class="list-item flex items-center justify-between">
          <div class="item-icon"> <img src="/icons/<%= task.icon%>" alt=""></div>
          <a href="/edit/<%= task.id%>" class="item-info">
            <div class="item-title">
              <%= task.title%>
            </div>
            <div class="item-des">
              <%= task.description%>
            </div>
          </a>
          <div class="item-time">
            <div class="time-value">
              <%= task.create_at.toLocaleTimeString()%>
            </div>
            <div class="item-action flex items-center">
              <a href="/complete/<%= task.id%>" class="action-item check flex"><img src="/icons/icon-check.svg"
                  alt=""></a>
              <a href="/delete/<%= task.id%>" class="action-item delete flex"><img src="/icons/icon-delete.svg"
                  alt=""></a>
            </div>
          </div>
        </div>
        <%}%>
              <%}%>
        <!-- <div class="list-item flex items-center justify-between">
          <div class="item-icon"> <img src="/icons/icon-shoe.svg" alt=""></div>
          <div class="item-info">
            <div class="item-title">Lorem ipsum dolor sit amet.</div>
            <div class="item-des">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsam, veniam.</div>
          </div>
          <div class="item-time">
            <div class="time-value">9am</div>
            <div class="item-action flex items-center">
              <div class="action-item check flex"><img src="/icons/icon-check.svg" alt=""></div>
              <div class="action-item delete flex"><img src="/icons/icon-delete.svg" alt=""></div>
            </div>
          </div>
        </div>
        <div class="list-item flex items-center justify-between">
          <div class="item-icon"> <img src="/icons/icon-works.svg" alt=""></div>
          <div class="item-info">
            <div class="item-title">Lorem ipsum dolor sit amet.</div>
            <div class="item-des">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsam, veniam.</div>
          </div>
          <div class="item-time">
            <div class="time-value">9am</div>
            <div class="item-action flex items-center">
              <div class="action-item check flex"><img src="/icons/icon-check.svg" alt=""></div>
              <div class="action-item delete flex"><img src="/icons/icon-delete.svg" alt=""></div>
            </div>
          </div>
        </div> -->
      </div>
      <div class="main-title flex items-center">
        <div class="title">Completed </div>
        <div class="total"><%= rows_total[0].completed %></div>
      </div>
      <div class="main-lists tasks">
        <% for(let task of taskRows){%>
        <% if(task.completed == true){%>
        <div class="list-item flex items-center justify-between">
          <div class="item-icon"> <img src="/icons/<%= task.icon%>" alt=""></div>
          <a href="/edit/<%= task.id%>" class="item-info">
            <div class="item-title">
              <%= task.title%>
            </div>
            <div class="item-des">
              <%= task.description%>
            </div>
          </a>
          <div class="item-time">
            <div class="time-value">
              <%= task.create_at.toLocaleTimeString()%>
            </div>
            <div class="item-action flex items-center">
              <a href="/restore/<%= task.id%>" class="action-item restore flex"><img src="/icons/icon-restore.svg"
                  alt=""></a>
              <a href="/delete/<%= task.id%>" class="action-item delete flex"><img src="/icons/icon-delete.svg"
                  alt=""></a>
            </div>
          </div>
        </div>
        <%}%>
              <%}%>
      </div>
    </div>
  </main>
  <script src="/js/main.js"></script>
</body>

</html>